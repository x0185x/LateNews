{{ define "main" }}
<div class="container">
    <div class="row">
        <!-- Main Content -->
        <div class="col-lg-8">
            <div class="listing-detail bg-white rounded shadow-sm p-4 mb-4">
                <!-- Breadcrumb -->
                <nav aria-label="breadcrumb" class="mb-4">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{{ .Site.Home.RelPermalink }}">Home</a></li>
                        {{ with .Params.categories }}
                        <li class="breadcrumb-item"><a href="/categories/{{ index . 0 | urlize }}">{{ index . 0 }}</a></li>
                        {{ end }}
                        <li class="breadcrumb-item active">{{ .Title }}</li>
                    </ol>
                </nav>

                <!-- Title & Meta -->
                <h1 class="mb-3">{{ .Title }}</h1>
                <div class="listing-meta text-muted mb-4">
                    <span class="me-3"><i class="fas fa-calendar me-1"></i> {{ .Date.Format "Jan 02, 2006" }}</span>
                    <span class="me-3"><i class="fas fa-map-marker-alt me-1"></i> {{ .Params.location }}</span>
                    {{ with .Params.categories }}
                    <span class="me-3"><i class="fas fa-tag me-1"></i> {{ index . 0 }}</span>
                    {{ end }}
                </div>

                <!-- Image Gallery -->
                {{ if .Params.images }}
                <div class="listing-gallery mb-4">
                    <div id="listingCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            {{ range $index, $image := .Params.images }}
                            <div class="carousel-item {{ if eq $index 0 }}active{{ end }}">
                                <img src="{{ $image }}" class="d-block w-100 rounded" alt="Listing image">
                            </div>
                            {{ end }}
                        </div>
                        {{ if gt (len .Params.images) 1 }}
                        <button class="carousel-control-prev" type="button" data-bs-target="#listingCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#listingCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                        {{ end }}
                    </div>
                </div>
                {{ end }}

                <!-- Price -->
                <div class="listing-price mb-4">
                    <h2 class="text-primary">{{ .Params.price }}</h2>
                </div>

                <!-- Content -->
                <div class="listing-content mb-4">
                    {{ .Content }}
                </div>

                <!-- Tags -->
                {{ with .Params.tags }}
                <div class="listing-tags mb-4">
                    {{ range . }}
                    <a href="/tags/{{ . | urlize }}" class="btn btn-sm btn-light me-2 mb-2">#{{ . }}</a>
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <!-- Contact Information -->
            <div class="contact-box bg-white rounded shadow-sm p-4 mb-4">
                <h3 class="h5 mb-4">Contact Information</h3>
                {{ with .Params.contact }}
                <ul class="list-unstyled mb-4">
                    {{ with .name }}
                    <li class="mb-3">
                        <i class="fas fa-user me-2"></i> {{ . }}
                    </li>
                    {{ end }}
                    {{ with .phone }}
                    <li class="mb-3">
                        <i class="fas fa-phone me-2"></i> 
                        <a href="tel:{{ . }}" class="text-decoration-none">{{ . }}</a>
                    </li>
                    {{ end }}
                    {{ with .email }}
                    <li class="mb-3">
                        <i class="fas fa-envelope me-2"></i>
                        <a href="mailto:{{ . }}" class="text-decoration-none">{{ . }}</a>
                    </li>
                    {{ end }}
                </ul>
                {{ end }}
                <button class="btn btn-primary w-100 mb-2">
                    <i class="fas fa-phone me-2"></i> Contact Seller
                </button>
                <button class="btn btn-outline-primary w-100">
                    <i class="fas fa-heart me-2"></i> Save to Favorites
                </button>
            </div>

            <!-- Safety Tips -->
            <div class="safety-tips bg-light rounded p-4">
                <h3 class="h5 mb-3">Safety Tips</h3>
                <ul class="list-unstyled small text-muted">
                    <li class="mb-2"><i class="fas fa-check-circle me-2"></i> Meet in a safe public place</li>
                    <li class="mb-2"><i class="fas fa-check-circle me-2"></i> Don't pay in advance</li>
                    <li class="mb-2"><i class="fas fa-check-circle me-2"></i> Check the item before buying</li>
                    <li class="mb-2"><i class="fas fa-check-circle me-2"></i> Report suspicious behavior</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{{ end }}